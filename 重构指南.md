# Spec-Kit Flow 全中文 SDD 开发重构指南

## 📌 目标

使用全中文工作流重新开始本项目的 Spec-Driven Development 开发流程。

## 🎯 重构步骤

### 第一步：初始化 Git 仓库（在终端执行）

```bash
# 1. 添加所有基础文件到 Git
cd /Users/liuhonglei/workspace/web/spec-kit-flow
git add .gitignore
git add .cursor/
git add .specify/
git add memory/
git add templates/
git add README.md
git add CLAUDE.md
git add package.json

# 2. 提交初始配置
git commit -m "chore: 初始化项目配置和中文 SDD 环境"

# 3. 删除现有的英文 spec（稍后用中文重建）
rm -rf specs/
git add -A
git commit -m "chore: 清理旧的英文规范，准备使用中文重建"
```

### 第二步：在 Cursor 中使用中文命令重建特性

#### 2.1 创建项目宪章

在 Cursor AI 聊天框中输入：

```
/speckit.constitution_cn 创建项目治理原则，重点关注：
1. 规范驱动开发的严格执行
2. 代码质量标准（TypeScript strict 模式、80%+ 测试覆盖率）
3. 用户体验一致性（WCAG 2.1 AA、响应式设计）
4. 性能要求（初始加载 < 2秒、实时更新 < 100ms）
5. 本地优先、离线工作的架构约束
6. 开源开发和文档维护标准
```

**注意**：由于 `memory/constitution.md` 已经存在且是中文的，这一步可能只是更新或确认内容。

#### 2.2 创建功能规范

在 Cursor AI 聊天框中输入：

```
/speckit.specify_cn 建立 Spec-Kit Flow 的核心可视化框架。

需求描述：
创建一个基于自由布局流程图的可视化界面，用于展示和编辑 spec-kit 项目文档。
主要功能包括：
1. 自动扫描并可视化 spec-kit 文档结构（constitution、specs、plans、tasks）
2. 支持节点的自由拖拽布局和位置保存
3. 点击节点可查看和编辑 Markdown 内容
4. 支持新增和删除文档节点
5. 实时同步文件系统变更

技术方向：
- 使用 React 18 + TypeScript 5
- 桌面应用采用 Tauri（轻量级）
- 流程图使用 ReactFlow 库
- 状态管理使用 Zustand
- Markdown 编辑器使用 CodeMirror 6
```

**这将会**：
- 创建新的特性分支（如 `001-visual-flow-foundation`）
- 在 `specs/001-visual-flow-foundation/` 创建中文的 `spec.md`

#### 2.3 创建技术实施计划

在 Cursor AI 聊天框中输入：

```
/speckit.plan_cn 

技术栈详细说明：
- 前端框架：React 18.2+ with TypeScript 5.0+
- 桌面框架：Tauri 1.5+（选择 Tauri 而非 Electron，理由是体积更小、性能更好、安全性更高）
- 构建工具：Vite 5.x（快速的开发服务器和 HMR）
- 流程图引擎：ReactFlow 11.x（成熟的 React 流程图库，支持自定义节点）
- 状态管理：Zustand 4.x（轻量级、TypeScript 友好）
- Markdown 编辑：CodeMirror 6 + react-markdown
- 文件监控：Rust notify crate（通过 Tauri）
- 样式方案：Tailwind CSS 3.x（快速开发、一致性好）
- 测试框架：Vitest + React Testing Library
- 代码规范：ESLint + Prettier

架构设计：
- 组件化架构（原子设计模式）
- 关注点分离（UI、业务逻辑、数据层）
- 事件驱动的实时更新机制
- 文件系统作为唯一真实数据源
- Tauri Command 模式进行前后端通信
```

**这将会**：
- 创建 `plan.md`（技术实施计划）
- 创建 `research.md`（技术调研文档）
- 创建 `contracts/`（API 规范等）
- 更新 CLAUDE.md 等 AI 上下文文件

#### 2.4 生成任务分解

在 Cursor AI 聊天框中输入：

```
/speckit.tasks_cn
```

**这将会**：
- 创建 `tasks.md`，包含详细的任务分解
- 按照用户故事组织任务
- 标记任务依赖关系和可并行执行的任务

#### 2.5 执行实现

**重要**：在执行实现前，请先：
1. 安装必要的开发工具（Node.js、Rust、Tauri CLI 等）
2. 检查 `tasks.md` 确认任务分解合理
3. 确保理解每个阶段的目标

在 Cursor AI 聊天框中输入：

```
/speckit.implement_cn
```

**AI 将会**：
- 按照 `tasks.md` 的顺序执行任务
- 创建项目文件结构
- 编写代码实现
- 运行测试和构建
- 提供进度反馈

### 第三步：可选的辅助命令

#### 澄清需求（在 plan 之前）

如果规范有不清楚的地方：

```
/speckit.clarify_cn
```

#### 分析一致性（在 implement 之前）

检查 spec、plan、tasks 之间的一致性：

```
/speckit.analyze_cn
```

#### 生成检查清单

创建质量检查清单：

```
/speckit.checklist_cn
```

## 📁 预期的项目结构

```
spec-kit-flow/
├── .cursor/
│   └── commands/          # Cursor 自定义命令
├── .specify/
│   ├── memory/
│   │   ├── constitution.md      # 项目宪章模板
│   │   └── constitution_cn.md   # 中文宪章模板
│   ├── scripts/          # 自动化脚本
│   └── templates/        # 文档模板
├── memory/
│   ├── constitution.md   # 项目宪章（中文，已填充）
│   └── constitution_en.md # 英文备份
├── specs/
│   └── 001-visual-flow-foundation/
│       ├── spec.md       # 功能规范（中文）
│       ├── plan.md       # 实施计划（中文）
│       ├── research.md   # 技术调研（中文）
│       ├── tasks.md      # 任务分解（中文）
│       └── contracts/    # API 规范等
├── src/                  # 源代码（implement 后生成）
├── README.md
├── package.json
└── .gitignore
```

## ✅ 验证检查清单

完成每一步后，检查：

- [ ] Git 仓库已正确初始化
- [ ] `.gitignore` 已配置
- [ ] `memory/constitution.md` 是中文版本
- [ ] 创建了特性分支（如 `001-visual-flow-foundation`）
- [ ] `spec.md` 是中文内容
- [ ] `plan.md` 包含详细的中文技术方案
- [ ] `tasks.md` 包含清晰的中文任务列表
- [ ] 所有 AI 命令都使用 `_cn` 后缀

## 🔄 日常开发工作流

### 新增功能

```
1. /speckit.specify_cn <功能描述>
2. /speckit.clarify_cn（可选）
3. /speckit.plan_cn <技术方案>
4. /speckit.tasks_cn
5. /speckit.analyze_cn（可选）
6. /speckit.implement_cn
```

### 更新现有功能

```
1. 切换到对应的特性分支
2. 使用相应的中文命令更新文档
3. 重新执行 implement
```

## 💡 最佳实践

1. **一次只专注一个特性**
   - 在不同分支上工作不同的特性
   - 完成一个特性后再开始下一个

2. **保持文档同步**
   - 需求变更时，先更新 spec.md
   - 技术方案变更时，更新 plan.md
   - 任务调整时，更新 tasks.md

3. **使用 Git 记录进度**
   - 每个 SDD 阶段完成后提交
   - 写清晰的中文提交信息

4. **定期运行分析**
   - 使用 `/speckit.analyze_cn` 检查一致性
   - 确保 spec、plan、tasks 保持同步

## 🚨 常见问题

### Q: 命令没有出现在 Cursor 中？
A: 重启 Cursor IDE，确保在正确的项目目录中。

### Q: 生成的内容是英文的？
A: 确保使用的是 `_cn` 后缀的命令（如 `/speckit.specify_cn`）。

### Q: 脚本执行失败？
A: 检查是否在 Git 仓库中，是否在正确的分支上。

### Q: 如何切换回英文开发？
A: 
1. 将 `memory/constitution_en.md` 复制为 `constitution.md`
2. 使用不带 `_cn` 后缀的命令

## 📚 参考资源

- [Spec-Kit 官方文档](https://github.com/github/spec-kit)
- [Spec-Driven Development 方法论](../spec-driven.md)
- 中文命令文件：`.cursor/commands/speckit.*_cn.md`
- 中文模板文件：`.specify/templates/*_cn.md`

---

**祝开发顺利！** 🚀

